// export const getAIResponse = (userMessage: string) => {
//     const lowerMsg = userMessage.toLowerCase();

//     // Problemas de funcionamiento general
//     if (lowerMsg.includes("tild") || lowerMsg.includes("congel") ||
//         lowerMsg.includes("no responde") || lowerMsg.includes("funciona mal") ||
//         lowerMsg.includes("se detuvo") || lowerMsg.includes("no anda") ||
//         lowerMsg.includes("falla") || lowerMsg.includes("error")) {
//         return `üîß **Problemas de funcionamiento detectados**

// Parece que tu bot est√° experimentando dificultades. Vamos a solucionarlo:

// 1. **Reinicio del servicio**:
//    - Ve al Panel de Control > Servicios
//    - Busca "BotMaster Service"
//    - Haz clic en "Reiniciar"

// 2. **Verificaci√≥n de conexi√≥n**:
//    - Prueba tu conexi√≥n a internet
//    - Si usas VPN/proxy, verifica que est√© activo
//    - Ping a api.botmaster.com (deber√≠as obtener respuesta)

// 3. **Actualizaciones pendientes**:
//    - Versi√≥n actual: ${getCurrentVersion()}
//    - Chequea en "Configuraci√≥n > Actualizaciones"

// 4. **Logs de error**:
//    - Los encontrar√°s en /var/log/botmaster/
//    - Errores comunes: 
//      * "API_LIMIT_EXCEEDED" - Reducir frecuencia de acciones
//      * "AUTH_FAILED" - Revisar credenciales

// üìå *¬øEl problema ocurre con alguna red social en particular (WhatsApp/Instagram/Facebook)?*`;
//     }

//     // Problemas espec√≠ficos de WhatsApp
//     else if ((lowerMsg.includes("whatsapp") || lowerMsg.includes("wa")) &&
//         (lowerMsg.includes("problema") || lowerMsg.includes("error"))) {
//         return `üì± **Problemas espec√≠ficos con WhatsApp**

// Problemas comunes y soluciones:

// 1. **Bot no env√≠a mensajes**:
//    - Verifica que el n√∫mero est√© verificado en WhatsApp Business
//    - Revisa que no haya restricciones en el n√∫mero
//    - Chequea la conexi√≥n con el dispositivo vinculado

// 2. **Mensajes no entregados**:
//    - El usuario podr√≠a haber bloqueado tu n√∫mero
//    - L√≠mite de mensajes no oficial: 30-50/hora por n√∫mero
//    - Espera 12 horas si recibes muchos errores 429

// 3. **Sesi√≥n caducada**:
//    - Reescanea el c√≥digo QR desde el panel
//    - Aseg√∫rate que el tel√©fono tenga buena conexi√≥n
//    - Activa "Mantener sesi√≥n activa" en configuraci√≥n

// ‚ö†Ô∏è *¬øEst√°s usando n√∫meros nuevos o n√∫meros reciclados? Los n√∫meros nuevos tienen l√≠mites m√°s estrictos.*`;
//     }

//     // Problemas espec√≠ficos de Instagram
//     else if ((lowerMsg.includes("instagram") || lowerMsg.includes("ig")) &&
//         (lowerMsg.includes("problema") || lowerMsg.includes("error"))) {
//         return `üì∏ **Problemas con Instagram Automation**

// Soluciones para errores frecuentes:

// 1. **Bloqueos temporales**:
//    - L√≠mites recomendados:
//      * Likes: 50-60/hora
//      * Comentarios: 20-30/hora
//      * Follows: 30-40/hora
//    - Usa delays aleatorios entre 30-90 segundos

// 2. **Challenge de seguridad**:
//    - Completa el desaf√≠o "Soy un humano" manualmente
//    - Espera 24-48 horas antes de reanudar actividades
//    - Reduce la agresividad de los bots

// 3. **Problemas de API**:
//    - Actualiza a la √∫ltima versi√≥n del cliente
//    - Verifica tus credenciales de desarrollador
//    - Chequea status.api.instagram.com

// üîç *¬øPodr√≠as compartir el mensaje de error exacto que recibes?*`;
//     }

//     // Recuperaci√≥n de contrase√±a y acceso
//     else if (lowerMsg.includes("contrase√±a") || lowerMsg.includes("password") ||
//         lowerMsg.includes("olvid√©") || lowerMsg.includes("recuperar acceso") ||
//         lowerMsg.includes("login") || lowerMsg.includes("iniciar sesi√≥n") ||
//         lowerMsg.includes("cuenta bloqueada") || lowerMsg.includes("acceso denegado")) {
//         return `üîê **Problemas de acceso**

// Soluci√≥n paso a paso:

// 1. **Recuperaci√≥n de contrase√±a**:
//    - Visita https://app.botmaster.com/forgot-password
//    - Ingresa tu email corporativo
//    - Revisa tu bandeja de entrada y spam
//    - El enlace expira en 1 hora

// 2. **Autenticaci√≥n en dos pasos (2FA)**:
//    - Si activaste 2FA, necesitar√°s tu app Authy/Google Authenticator
//    - C√≥digos de respaldo est√°n en tu dashboard
//    - ¬øNo recibes SMS? Verifica el n√∫mero asociado

// 3. **Cuenta bloqueada**:
//    - Demasiados intentos fallidos
//    - Espera 15 minutos o contacta a soporte@botmaster.com
//    - Proporciona tu User ID: BM-${Math.random().toString(36).substr(2, 8).toUpperCase()}

// üì≤ *¬øTienes acceso al email asociado a tu cuenta?*`;
//     }

//     // Bloqueos de cuenta en redes
//     else if (lowerMsg.includes("bloque") || lowerMsg.includes("bane") ||
//         lowerMsg.includes("suspend") || lowerMsg.includes("restricci√≥n") ||
//         lowerMsg.includes("limitaci√≥n") || lowerMsg.includes("violaci√≥n") ||
//         lowerMsg.includes("infracci√≥n") || lowerMsg.includes("pol√≠tica")) {
//         return `üö® **Bloqueos de cuenta**

// An√°lisis detallado:

// 1. **Tipos de bloqueo**:
//    - ‚è≥ *Temporal*: 24-72 horas (actividad inusual)
//    - ‚ö†Ô∏è *Acciones limitadas*: 7-14 d√≠as (violaci√≥n menor)
//    - ‚ùå *Permanente*: Violaci√≥n grave de pol√≠ticas

// 2. **Causas comunes**:
//    - Comportamiento rob√≥tico (acciones muy r√°pidas)
//    - Uso de palabras prohibidas en mensajes
//    - Demasiados rechazos (unfollows/bloqueos)
//    - Reportes de otros usuarios

// 3. **Proceso de apelaci√≥n**:
//    - Para Instagram: Configuraci√≥n > Ayuda > Reportar problema
//    - Para WhatsApp: email a support@whatsapp.com
//    - Incluye detalles y promete ajustar comportamiento

// üìä *¬øQu√© porcentaje de tus acciones generan interacci√≥n positiva (respuestas/likes)?*`;
//     }

//     // Configuraci√≥n avanzada
//     else if (lowerMsg.includes("configur") || lowerMsg.includes("program") ||
//         lowerMsg.includes("ajust") || lowerMsg.includes("flujo") ||
//         lowerMsg.includes("script") || lowerMsg.includes("automatiz") ||
//         lowerMsg.includes("secuencia") || lowerMsg.includes("plantilla")) {
//         return `‚öôÔ∏è **Configuraci√≥n Avanzada**

// Gu√≠a experta para configuraci√≥n:

// 1. **Flujos de mensajer√≠a**:
//    - Usa variables {nombre}, {fecha} para personalizaci√≥n
//    - Ejemplo avanzado:
//      \`\`\`
//      Hola {nombre}, vi tu perfil el {fecha}. 
//      ¬øTe interesa conectar? 
//      [Si/No] ‚Üí Guardar respuesta
//      \`\`\`

// 2. **L√≥gica condicional**:
//    - IF usuario sigue > 1000 THEN enviar mensaje A
//    - IF perfil tiene foto THEN agregar a lista VIP
//    - ELSE enviar mensaje gen√©rico

// 3. **Integraci√≥n con APIs**:
//    - Webhooks para conectar con tu CRM
//    - Zapier para automatizar con 500+ apps
//    - Endpoint personalizado: api.botmaster.com/v3/{tu-api-key}

// üí° *¬øNecesitas que te comparta plantillas de configuraci√≥n para tu caso espec√≠fico?*`;
//     }

//     // Rendimiento y optimizaci√≥n
//     else if (lowerMsg.includes("lent") || lowerMsg.includes("r√°pid") ||
//         lowerMsg.includes("optimiz") || lowerMsg.includes("velocidad") ||
//         lowerMsg.includes("performance") || lowerMsg.includes("rendimiento") ||
//         lowerMsg.includes("mejorar") || lowerMsg.includes("eficiencia")) {
//         return `üöÄ **Optimizaci√≥n de Performance**

// T√©cnicas avanzadas:

// 1. **Paralelizaci√≥n**:
//    - M√°x. recomendado: 3-5 cuentas por n√∫cleo de CPU
//    - Balancear carga entre m√∫ltiples servidores
//    - Usar workers separados para:
//      * Env√≠o de mensajes
//      * Procesamiento de respuestas
//      * Monitoreo de actividad

// 2. **Delay inteligente**:
//    - F√≥rmula √≥ptima: 
//      \`\`\`
//      delay = (baseDelay ¬± random(30%)) * factorSeguridad
//      \`\`\`
//    - Ajustar seg√∫n tasa de √©xito

// 3. **Patrones de comportamiento**:
//    - Simular horario humano (9AM-9PM)
//    - Variabilidad geogr√°fica (usar proxies locales)
//    - Patrones de descanso aleatorios

// üìà *¬øQu√© volumen de acciones diarias est√°s manejando actualmente?*`;
//     }

//     // Facturaci√≥n avanzada
//     else if (lowerMsg.includes("pago") || lowerMsg.includes("factur") ||
//         lowerMsg.includes("suscrip") || lowerMsg.includes("renovar") ||
//         lowerMsg.includes("tarifa") || lowerMsg.includes("precio") ||
//         lowerMsg.includes("plan") || lowerMsg.includes("cobro") ||
//         lowerMsg.includes("reembolso") || lowerMsg.includes("factura")) {
//         return `üí≥ **Gesti√≥n de Facturaci√≥n**

// Informaci√≥n detallada:

// 1. **Planes disponibles**:
//    - üü¢ B√°sico ($99/mes): 5 cuentas, 1k acciones/d√≠a
//    - üîµ Pro ($299/mes): 20 cuentas, 10k acciones/d√≠a
//    - üü£ Enterprise (Personalizado): SLA 99.9%

// 2. **Ciclo de facturaci√≥n**:
//    - Renovaci√≥n autom√°tica cada 30 d√≠as
//    - Notificaci√≥n 72 horas antes
//    - Periodo de gracia: 48 horas

// 3. **Problemas comunes**:
//    - Tarjeta rechazada: Actualizar m√©todo de pago
//    - Facturaci√≥n duplicada: Solicitar merge de cuentas
//    - Historial completo: dashboard.botmaster.com/billing

// ‚úâÔ∏è *¬øNecesitas factura con datos fiscales espec√≠ficos? Proporciona tu RFC/CUIT/NIT.*`;
//     }

//     // Problemas legales y pol√≠ticas
//     else if (lowerMsg.includes("legal") || lowerMsg.includes("pol√≠tica") ||
//         lowerMsg.includes("tos") || lowerMsg.includes("t√©rminos") ||
//         lowerMsg.includes("privacidad") || lowerMsg.includes("gdpr") ||
//         lowerMsg.includes("cumplimiento") || lowerMsg.includes("regulaci")) {
//         return `‚öñÔ∏è **Asesor√≠a Legal y Cumplimiento**

// Consideraciones clave:

// 1. **Consentimiento expl√≠cito**:
//    - Base legal para mensajes: Opt-in verificable
//    - Incluir opci√≥n de opt-out en cada mensaje
//    - Mantener registros de consentimiento por 5 a√±os

// 2. **Regulaciones por regi√≥n**:
//    - UE: GDPR (multas hasta 4% facturaci√≥n anual)
//    - USA: TCPA ($500-$1500 por mensaje no solicitado)
//    - Latam: Leyes locales de protecci√≥n de datos

// 3. **Mejores pr√°cticas**:
//    - No automatizar grupos no consentidos
//    - Limitar mensajes promocionales
//    - Auditor√≠as mensuales de listas de contacto

// üìú *¬øOperas en m√∫ltiples jurisdicciones? Necesitar√°s pol√≠ticas regionalizadas.*`;
//     }

//     // Actualizaciones y nuevas caracter√≠sticas
//     else if (lowerMsg.includes("actualiz") || lowerMsg.includes("nueva versi√≥n") ||
//         lowerMsg.includes("mejora") || lowerMsg.includes("feature") ||
//         lowerMsg.includes("roadmap") || lowerMsg.includes("lanzamiento") ||
//         lowerMsg.includes("beta") || lowerMsg.includes("novedad")) {
//         return `üõ†Ô∏è **√öltimas Actualizaciones**

// Novedades v3.2.1 (Julio 2023):

// 1. **Nuevas integraciones**:
//    - WhatsApp Business API (certificaci√≥n oficial)
//    - LinkedIn Sales Navigator
//    - Telegram Bots 2.0

// 2. **Mejoras de seguridad**:
//    - Encriptaci√≥n E2E para todos los mensajes
//    - Autenticaci√≥n biom√©trica para acceso
//    - Auditor√≠a de permisos granular

// 3. **Pr√≥ximos lanzamientos**:
//    - üü¢ Q3: An√°lisis de sentimiento en tiempo real
//    - üü° Q4: Integraci√≥n con Shopify
//    - üî¥ 2024: AI para generaci√≥n de respuestas

// üß™ *¬øQuieres acceso anticipado al programa beta? Solic√≠talo en settings > advanced.*`;
//     }

//     // Saludos y conversaci√≥n inicial
//     else if (lowerMsg.includes("hola") || lowerMsg.includes("buenas") ||
//         lowerMsg.includes("saludos") || lowerMsg.match(/^hi|^hello/) ||
//         lowerMsg.includes("qu√© tal") || lowerMsg.includes("como est√°s")) {
//         return `üëã **¬°Hola! Soy BotMaster Assistant**  

// Puedo ayudarte con:  

// üîπ *Problemas t√©cnicos*: bloqueos, errores, configuraci√≥n  
// üîπ *Optimizaci√≥n*: rendimiento, estrategias de crecimiento  
// üîπ *Facturaci√≥n*: pagos, planes, facturas  
// üîπ *Legal*: cumplimiento, pol√≠ticas de redes  

// *¬øEn qu√© √°rea necesitas ayuda hoy?*  

// ‚ÑπÔ∏è Tambi√©n puedes decir "ejemplos" para ver casos comunes`;
//     }

//     // Despedidas y agradecimientos
//     else if (lowerMsg.includes("adi√≥s") || lowerMsg.includes("chao") ||
//         lowerMsg.includes("gracias") || lowerMsg.includes("bye") ||
//         lowerMsg.includes("suficiente") || lowerMsg.includes("hasta luego")) {
//         return `‚ú® **¬°Gracias por usar BotMaster!**  

// Recuerda que puedes:  

// üìå Guardar esta conversaci√≥n desde el men√∫  
// üõ†Ô∏è Acceder a tutoriales en: help.botmaster.com  
// üìû Contactar soporte humano en: support@botmaster.com  

// *¬°Que tengas excelentes resultados con tus automatizaciones!*  

// [Tu equipo BotMaster ü§ñ]`;
//     }

//     // Solicitud de ejemplos
//     else if (lowerMsg.includes("ejemplo") || lowerMsg.includes("caso") ||
//         lowerMsg.includes("muestra") || lowerMsg.includes("demo")) {
//         return `üìÇ **Casos de √âxito Reales**  

// 1. **E-commerce** (@ModaFashion):  
//    - ‚è±Ô∏è 3h diarias ahorradas en atenci√≥n al cliente  
//    - üìà +25% conversiones con mensajes personalizados  
//    - ü§ñ Flujo automatizado:  
//      \`\`\`
//      [Pedido recibido] ‚Üí Confirmaci√≥n + tiempo de entrega  
//      [24h antes] ‚Üí Recordatorio + opci√≥n reprogramar  
//      [Post-entrega] ‚Üí Solicitud de review + cup√≥n  
//      \`\`\`

// 2. **Agencia Marketing** (@DigitalPros):  
//    - üîÑ 200 leads/d√≠a procesados autom√°ticamente  
//    - üè∑Ô∏è Clasificaci√≥n por inter√©s usando IA  
//    - üìä Integraci√≥n completa con Google Sheets  

// üíº *¬øQu√© tipo de negocio tienes? Puedo darte ejemplos m√°s espec√≠ficos.*`;
//     }
//     // Informaci√≥n sobre el bot asistente
//     else if (lowerMsg.includes("qui√©n eres") || lowerMsg.includes("qu√© eres") ||
//         lowerMsg.includes("informaci√≥n sobre ti") || lowerMsg.includes("tus capacidades") ||
//         lowerMsg.includes("versi√≥n") || lowerMsg.includes("actualizaci√≥n")) {
//         return `ü§ñ **Sobre M√≠ - Asistente Virtual de BotMaster**  

// *Datos t√©cnicos:*  
// ‚Ä¢ Versi√≥n: ${getCurrentVersion()}  
// ‚Ä¢ √öltima actualizaci√≥n: ${getLastUpdateDate()}  
// ‚Ä¢ Capacidades: Soporte para WhatsApp, Instagram, Facebook y Telegram  

// *Novedades en mi √∫ltima actualizaci√≥n (v3.1.2):*  
// ‚úì Mejor manejo de errores de conexi√≥n  
// ‚úì +15 plantillas de respuestas autom√°ticas  
// ‚úì Diagn√≥stico optimizado de bloqueos  
// ‚úì Soporte inicial para Threads (Meta)  

// *Estad√≠sticas de hoy:*  
// ‚úî ${Math.floor(Math.random() * 50) + 30} consultas resueltas  
// ‚úî ${Math.floor(Math.random() * 90) + 10}% tasa de √©xito  
// ‚úî Tiempo promedio respuesta: 1.2 segundos  

// ¬øQuieres conocer alg√∫n detalle espec√≠fico de mi funcionamiento?`;
//     }
//     // Respuesta por defecto avanzada
//     else {
//         return `ü§î **Necesito m√°s informaci√≥n**  

// Para ayudarte mejor, por favor especifica:  

// 1. **Plataforma**: ¬øWhatsApp, Instagram, otras?  
// 2. **Tipo de problema**:  
//    - Configuraci√≥n  
//    - Bloqueos  
//    - Rendimiento  
//    - Facturaci√≥n  
// 3. **Pasos para reproducir**: ¬øQu√© hiciste antes del error?  

// üìå *Ejemplo de consulta clara*:  
// *"Mi bot para Instagram dej√≥ de seguir usuarios despu√©s de la actualizaci√≥n de ayer. Recibo error 429."*  

// üõ†Ô∏è *¬øPodr√≠as compartir estos detalles?*`;
//     }

// };

// // Funciones auxiliares para datos simulados
// const getCurrentVersion = () => {
//     const versions = ["v3.1.2", "v3.1.3-beta", "v3.0.8"];
//     return versions[Math.floor(Math.random() * versions.length)];
// };

// const getLastUpdateDate = () => {
//     const days = ["ayer", "hace 2 d√≠as", "esta ma√±ana"];
//     return days[Math.floor(Math.random() * days.length)];
// };


export const getAIResponse = (userMessage: string): string => {
    const normalizedMsg = userMessage
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, ""); // Normaliza texto (sin acentos ni may√∫sculas)

    // Detecci√≥n mejorada de intenciones
    const intents = {
        isAboutBot: /(quien|que|informacion|funcion|version|actualizacion|capacidad)/.test(normalizedMsg),
        isError: /(error|falla|problema|no funciona|tild|colg)/.test(normalizedMsg),
        isWhatsApp: /(whatsapp|wa)/.test(normalizedMsg),
        isInstagram: /(instagram|ig)/.test(normalizedMsg),
        isAuth: /(contrase√±a|login|acceso|cuenta)/.test(normalizedMsg),
        isBan: /(ban|bloque|suspension|limitacion)/.test(normalizedMsg),
        isConfig: /(configurar|programar|ajust|flujo|script)/.test(normalizedMsg),
        isBilling: /(pago|factura|suscrip|plan)/.test(normalizedMsg),
        isLegal: /(legal|terminos|privacidad|ley|gdpr)/.test(normalizedMsg),
        isGreeting: /(hola|buenas|saludos|hi|hello)/.test(normalizedMsg),
        isGoodbye: /(adios|gracias|bye|chao)/.test(normalizedMsg),
        isExamples: /(ejemplo|caso|demo|muestra)/.test(normalizedMsg)
    };

    // 1. Sobre el bot
    if (intents.isAboutBot) {
        return `ü§ñ **Asistente Virtual - BotMaster Pro v3.2**  
        
üîπ **Funcionamiento**:  
‚Ä¢ Motor de IA entrenado espec√≠ficamente para automatizaci√≥n de redes sociales  
‚Ä¢ Base de conocimiento actualizada al ${new Date().toLocaleDateString()}  
‚Ä¢ Compatibilidad con 9 plataformas principales  

üõ†Ô∏è **√öltima actualizaci√≥n**:  
‚úì Mejorado: Detecci√≥n de patrones de baneo (${getLastUpdateDate()})  
‚úì Nuevo: Soporte para Telegram Business  
‚úì Correcci√≥n: Error en gesti√≥n de proxies  

üìä **Estad√≠sticas**:  
‚Ä¢ ${Math.floor(Math.random() * 200) + 100} consultas atendidas hoy  
‚Ä¢ ${Math.floor(Math.random() * 15) + 85}% de precisi√≥n  

üí° *¬øQuieres que explique c√≥mo proces√© tu consulta?*`;
    }

    // 2. Problemas t√©cnicos
    if (intents.isError) {
        const platform = intents.isWhatsApp ? 'WhatsApp' :
            intents.isInstagram ? 'Instagram' :
                'general';

        return `üõ†Ô∏è **Soluci√≥n de Problemas ${platform !== 'general' ? 'en ' + platform : ''}**  

1. **Diagn√≥stico Autom√°tico**:  
   ‚Ä¢ Estado del servicio: ${getServiceStatus()}  
   ‚Ä¢ √öltimo error registrado: ${getRandomErrorCode()}  

2. **Acciones Recomendadas**:  
   ‚ö° Reinicio r√°pido:  
   \`\`\`bash
   systemctl restart botmaster-${platform.toLowerCase()}
   \`\`\`  
   üîç Verificar logs:  
   \`\`\`bash
   cat /var/log/botmaster/error.log | grep -i "${getRandomErrorWord()}"
   \`\`\`  

3. **Soporte T√©cnico**:  
   üìå C√≥digo de referencia: #${generateErrorId()}  
   üìß Enviar detalles a: tech@botmaster.com  
   üö® Urgencias: +1 (555) 123-4567  

*Adjunta captura del error para diagn√≥stico preciso*`;
    }

    // 3. WhatsApp espec√≠fico
    if (intents.isWhatsApp && !intents.isError) {
        return `üì± **Soporte WhatsApp Business**  

üîπ **L√≠mites recomendados**:  
‚Ä¢ Mensajes: 30-50/hora por n√∫mero  
‚Ä¢ Grupos: 10 acciones/hora  
‚Ä¢ Archivos: 15MB m√°ximo  

üõ°Ô∏è **Evitar baneos**:  
1. Usar delays aleatorios (45-90 segundos)  
2. Rotar n√∫meros cada 500 mensajes  
3. Evitar enlaces no verificados  

‚öôÔ∏è **API Key**:  
\`\`\`
${generateApiKey('WA')}
\`\`\`  
*Caduca en 7 d√≠as* | [Renovar clave](https://api.botmaster.com/wa/renew)`;
    }

    // 4. Instagram espec√≠fico
    if (intents.isInstagram && !intents.isError) {
        return `üì∏ **Soporte Instagram API**  

üîπ **L√≠mites seguros**:  
‚Ä¢ Likes: 60/hora  
‚Ä¢ Comentarios: 20/hora  
‚Ä¢ Follows: 30/hora  

üö® **Patrones de detecci√≥n**:  
1. Acciones demasiado r√°pidas (<30s entre acciones)  
2. Comentarios repetitivos  
3. Uso de proxies no residenciales  

üìä **Optimizaci√≥n**:  
\`\`\`python
bot.configure(
    delay=random.randint(45, 120),
    max_actions=50,
    proxy_type="residential"
)
\`\`\``;
    }

    // 5. Configuraci√≥n
    if (intents.isConfig) {
        return `‚öôÔ∏è **Configuraci√≥n Avanzada**  

**Flujos Recomendados**:  
1. *Engagement Inicial*:  
   \`\`\`javascript
   bot.flow()
     .wait(30) // Segundos
     .send("Hola {nombre}")
     .addQuickReply(["üëç S√≠", "üëé No"])
   \`\`\`  

2. *Recuperaci√≥n de Leads*:  
   \`\`\`python
   if user.status == "inactive":
       send_reactivation_sequence()
       update_database(conversion_rate=0.35)
   \`\`\`  

üìö *Documentaci√≥n completa*: [docs.botmaster.com/flujos](https://docs.botmaster.com/flujos)`;
    }

    // 6. Autenticaci√≥n
    if (intents.isAuth) {
        return `üîê **Gesti√≥n de Accesos**  

1. **Recuperar Contrase√±a**:  
   ‚Ä¢ Ve a: [botmaster.com/recover](https://botmaster.com/recover)  
   ‚Ä¢ Ingresa tu email registrado  
   ‚Ä¢ Revisa spam si no recibes el enlace en 5 min  

2. **Autenticaci√≥n 2FA**:  
   üì± App Authenticator:  
   \`\`\`
   C√≥digo: ${Math.random().toString().substr(2, 6)}
   Expira en: 2 minutos
   \`\`\`  

3. **Cuentas Bloqueadas**:  
   ‚è≥ Tiempo de espera: 24-48 horas  
   üìù Formulario de desbloqueo: [botmaster.com/unlock](https://botmaster.com/unlock)`;
    }

    // 7. Bloqueos
    if (intents.isBan) {
        return `üö® **Gesti√≥n de Bloqueos**  

üîπ **Tipos**:  
‚Ä¢ Temporal (24-72h) - Actividad inusual  
‚Ä¢ Limitado (7d) - Violaci√≥n menor  
‚Ä¢ Permanente - Reincidencia grave  

üõ†Ô∏è **Soluci√≥n**:  
1. Identificar causa exacta  
2. Esperar periodo completo  
3. Cambiar:  
   - Patrones de uso  
   - Dispositivo/IP  
   - Credenciales API  

üìå *Formulario de apelaci√≥n*: [botmaster.com/appeal](https://botmaster.com/appeal)`;
    }

    // 8. Facturaci√≥n
    if (intents.isBilling) {
        return `üí≥ **Gesti√≥n de Pagos**  

üìÖ **Ciclo de facturaci√≥n**:  
‚Ä¢ Renovaci√≥n autom√°tica cada 30 d√≠as  
‚Ä¢ Notificaci√≥n 72h antes  
‚Ä¢ Periodo de gracia: 48h  

üìù **Facturaci√≥n**:  
1. Descargar PDF: [botmaster.com/billing](https://botmaster.com/billing)  
2. Datos fiscales:  
   \`\`\`
   RFC: BMT-${Math.random().toString(36).substr(2, 8).toUpperCase()}
   \`\`\`  

üíº *¬øNecesitas cambiar tu plan actual?*`;
    }

    // 9. Legal
    if (intents.isLegal) {
        return `‚öñÔ∏è **Conformidad Legal**  

üìú **Pol√≠ticas clave**:  
1. GDPR (UE): Consentimiento expl√≠cito  
2. TCPA (EEUU): Prohibici√≥n llamadas autom√°ticas  
3. LFPDPPP (M√©xico): Protecci√≥n datos personales  

üõ°Ô∏è **Recomendaciones**:  
‚Ä¢ Almacenar pruebas de consentimiento √ó5 a√±os  
‚Ä¢ Incluir opci√≥n de opt-out en cada mensaje  
‚Ä¢ Auditor√≠a trimestral de bases de datos  

üìö *Recursos*: [legal.botmaster.com](https://legal.botmaster.com)`;
    }

    // 10. Ejemplos
    if (intents.isExamples) {
        return `üìÇ **Casos Reales de Implementaci√≥n**  

1. **E-commerce (@ModaStyle)**:  
   ‚Ä¢ +40% conversiones con flujo:  
   \`\`\`
   [Compra] ‚Üí Agradecimiento + cup√≥n  
   [3 d√≠as despu√©s] ‚Üí Solicitud de rese√±a  
   \`\`\`  

2. **Agencia (@SocialGrowth)**:  
   ‚Ä¢ 1500 leads/mes automatizados  
   ‚Ä¢ Taxonom√≠a:  
   \`\`\`python
   if "interesado" in respuesta:
       clasificar("lead_caliente")
   \`\`\`  

üí° *¬øNecesitas un flujo para ${getRandomBusinessType()}?*`;
    }

    // 11. Saludos
    if (intents.isGreeting) {
        return `üëã **¬°Bienvenido a BotMaster!**  

Soy tu asistente especializado en automatizaci√≥n de redes sociales.  

üîπ ¬øC√≥mo puedo ayudarte hoy?  
1. Soluci√≥n de problemas t√©cnicos  
2. Configuraci√≥n de flujos avanzados  
3. Consultas de facturaci√≥n  
4. Asesor√≠a legal  

*Escribe tu consulta o selecciona una opci√≥n*`;
    }

    // 12. Despedidas
    if (intents.isGoodbye) {
        return `‚ú® **¬°Gracias por usar BotMaster!**  

üìå Esta conversaci√≥n ha sido guardada con ID: #${generateConversationId()}  

üìß *¬øQuieres recibir el resumen por email?* Responde "s√≠" para enviarlo a tu correo registrado.  

üõ†Ô∏è [Calificar servicio](https://botmaster.com/feedback) | üìö [Centro de ayuda](https://help.botmaster.com)`;
    }

    // Respuesta por defecto mejorada
    return `‚ùì **No reconoc√≠ tu consulta**  

Para ayudarte mejor:  

1. Especifica la plataforma (WhatsApp/Instagram)  
2. Describe el problema con detalles t√©cnicos  
3. Comparte cualquier mensaje de error  

*Ejemplo v√°lido*:  
_"Recibo error 429 al enviar mensajes en WhatsApp despu√©s de actualizar a v3.2"_  

üí° *Prueba con:* "problema con Instagram", "c√≥mo configurar WhatsApp", "facturaci√≥n"`;
};

// Funciones auxiliares
const getLastUpdateDate = (): string => {
    const days = ["ayer", "hace 2 d√≠as", "esta ma√±ana"];
    return `${days[Math.floor(Math.random() * days.length)]} (v3.2.1)`;
};

const getServiceStatus = (): string => {
    return Math.random() > 0.2 ? "‚úÖ Operativo" : "‚ö†Ô∏è Inestable";
};

const getRandomErrorCode = (): string => {
    const codes = ["403 (Forbidden)", "429 (Rate Limit)", "500 (Server Error)"];
    return codes[Math.floor(Math.random() * codes.length)];
};

const generateErrorId = (): string => {
    return `ERR-${Math.random().toString(36).substr(2, 8).toUpperCase()}`;
};

const generateConversationId = (): string => {
    return `CONV-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;
};

const generateApiKey = (prefix: string): string => {
    return `${prefix}_${Math.random().toString(36).substr(2, 16).toUpperCase()}`;
};

const getRandomBusinessType = (): string => {
    const types = ["restaurantes", "e-commerce", "bienes ra√≠ces", "servicios profesionales"];
    return types[Math.floor(Math.random() * types.length)];
};

const getRandomErrorWord = (): string => {
    const words = ["timeout", "authentication", "limit", "connection"];
    return words[Math.floor(Math.random() * words.length)];
};